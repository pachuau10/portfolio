{% extends 'base.html' %}
{% load cloudinary %}
{% load static %}

{% block title %}Blog{% endblock title %}

{% block content %}

<div class='bg-gray-800 text-white p-5 md:py-8 md:px-20 lg:px-40 xl:px-60'>
<p class='text-4xl font-extrabold py-5 text-center md:text-start' style="font-family: Poppins-Bold">Blog</p>

{% for blog in blogs %}
<!-- START: Blog Post Card Container -->
<div class='flex flex-col md:flex-row gap-6 p-4 border-b border-gray-700 hover:bg-gray-700/30 transition duration-150 rounded-lg mb-4'>

    <!-- Image Column -->
    <div class="flex-shrink-0">
        {% if blog.thumbnail_img %}
            <!-- Accessing the image URL is correct with .url -->
            <img src="{{ blog.thumbnail_img.url }}" alt="{{ blog.title }}" class="rounded-lg object-cover w-full h-44 md:w-[350px] md:h-[180px] shadow-lg">
        {% else %}
            <img src="{% static 'images/default.png' %}" alt="{{ blog.title }}" class="rounded-lg object-cover w-full h-44 md:w-[350px] md:h-[180px] shadow-lg">
        {% endif %}
    </div>

    <!-- Text Content Column (This section was previously outside the loop) -->
    <div class="flex flex-col justify-between w-full">
        <div>
            <h3 class='text-2xl font-bold mb-2 text-white hover:text-cyan-300 transition duration-200'>
                <a href='/blogpost/{{ blog.slug }}'>{{ blog.title }}</a>
            </h3>
            <!-- Use blog.meta for snippet -->
            <p class='my-3 text-gray-300'>{{ blog.meta|slice:":180"|safe }}...</p>
        </div>

        <div class="flex justify-between items-center mt-4">
            <p class='text-sm text-gray-400'>by <span class="font-semibold text-cyan-200">pachuau_10</span> <i class="bi bi-dot mx-1"></i> {{ blog.time }}</p>
            <a href='/blogpost/{{ blog.slug }}'>
                <button class='bg-cyan-600 p-2 px-4 rounded-full text-sm font-medium hover:bg-cyan-700 transition delay-75 ease-in-out shadow-md'>
                    Read more
                </button>
            </a>
        </div>
    </div>
</div>
<!-- END: Blog Post Card Container -->
{% endfor %}

<!-- Pagination Block -->
<div class="pagination py-8 flex justify-between">
    {% if blogs.has_previous %}
        <a class='bg-blue-600 p-2 px-4 rounded-[6px] hover:bg-gray-800 hover:outline hover:outline-blue-600 transition delay-75 ease-in-out' href="?page={{ blogs.previous_page_number }}">
            <i class="bi bi-arrow-left font-extrabold"></i> Previous
        </a>
    {% endif %}
    {% if blogs.has_next %}
        <a class='bg-blue-600 p-2 px-4 rounded-[6px] hover:bg-gray-800 hover:outline hover:outline-blue-600 transition delay-75 ease-in-out ml-auto' href="?page={{ blogs.next_page_number }}">
            Next <i class="bi bi-arrow-right font-extrabold"></i>
        </a>
    {% endif %}
</div>


</div>
{% endblock content %}