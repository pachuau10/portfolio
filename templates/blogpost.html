{% extends 'base.html' %}
{% load cloudinary %}

{% block title %}{{ blog.title }}{% endblock %}

{% block head %}
    {{ block.super }}

    <meta property="og:title" content="{{ blog.title }}">
    <meta property="og:description" content="{{ blog.meta|default:blog.content|striptags|truncatewords:30 }}">
    <meta property="og:type" content="article">
    <meta property="og:url" content="{{ request.build_absolute_uri }}">
    <meta property="og:site_name" content="Pachuau10 Blog">

{% if blog.thumbnail_img %}
    {% comment %} Apply Cloudinary transformations: 
    w_1200,h_630,c_fill: Resizes image to the optimal 1.91:1 ratio.
    q_auto:best,f_auto: Reduces file size dramatically without noticeable quality loss.
    {% endcomment %}
    {% with base_url=blog.thumbnail_img.url|split:'upload/' %}
    {% with public_id=base_url.1|split:'.'|first %}

    {% comment %} Construct the optimized URL with transformations applied to the public ID {% endcomment %}
    <meta property="og:image" 
        content="{{ base_url.0 }}upload/w_1200,h_630,c_fill,q_auto:best,f_auto/{{ public_id }}">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ blog.title }}">
    <meta name="twitter:description" content="{{ blog.meta|default:blog.content|striptags|truncatewords:30 }}">
    <meta name="twitter:image" 
        content="{{ base_url.0 }}upload/w_1200,h_630,c_fill,q_auto:best,f_auto/{{ public_id }}">

    {% endwith %}
    {% endwith %}
{% endif %}
{% endblock head %}


{% block content %}
<div class='bg-gray-800 text-white p-8 pt-12 flex flex-col md:px-20 lg:px-36 xl:px-60 2xl:px-80'>
    <span class='text-center text-3xl md:text-4xl font-bold text-cyan-200 hover:text-cyan-300 transition duration-300'><a href='{{blog.slug}}'>{{blog.title}}</a></span>
    <span class='text-center mt-2 text-gray-400'>by <a href='/about'><i class="bi bi-person"></i> <span class='group'><span class='group-hover:text-cyan-200 bg-left-bottom bg-gradient-to-r from-cyan-300 to-blue-500 bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out'>pachuau_10</span></span><a> <i class="bi bi-dot"></i> <span><i class="bi bi-calendar4-event"></i> {{blog.time}}</span> <i class="bi bi-dot"></i> <i class="bi bi-tag"></i> <a href='/category/{{blog.category}}'><span class='group'><span class='group-hover:text-cyan-200 bg-left-bottom bg-gradient-to-r from-cyan-300 to-blue-500 bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out'>{{blog.category}}</span></span></span></a>
    <img class='rounded-lg my-6 flex justify-center' src="{{blog.thumbnail_img.url}}">
    <p class=''>{{blog.content|safe}} </p>
</div>
<style> 
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-size: revert;
        font-weight: revert;
    }
  
    {% comment %} ol,
    ul {
        list-style: revert;
        margin: revert;
        padding: revert;
    } {% endcomment %}
    p a {
        color: #67e8f9;
        background: 
          linear-gradient(to right, rgba(103,232,249, 1), rgba(59, 130, 246, 1)),
          linear-gradient(to right, rgba(34,211,238, 1), rgba(59, 130, 246, 1), rgba(29, 78, 216, 1));
        background-size: 100% 0.1em, 0 0.1em;
        background-position: 100% 100%, 0 100%;
        background-repeat: no-repeat;
        transition: background-size 400ms;
    }
      
    p a:hover,
    p a:focus {
        background-size: 0 0.1em, 100% 0.1em;
    }
    p img {
        border-radius: 8px;
    }
</style>
{% endblock %}